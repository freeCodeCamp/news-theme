{"version":3,"sources":["infinitescroll.js"],"names":["window","document","nextElement","querySelector","feedElement","loading","getElementById","addEventListener","onUpdate","passive","remove","status","appendChild","item","querySelectorAll","forEach","resNextElement","href","removeEventListener","send","xhr","XMLHttpRequest","onPageLoad","open"],"mappings":"CAKI,SAAAA,EAAAC,GACA,IAAIC,EAAcD,EAASE,cAAc,kBACzC,GAAKD,EAAL,CAMA,IAAIE,EAAcH,EAASE,cAAc,cACzC,GAAKC,EAAL,CAEA,IAAIC,GAAU,EA6CdJ,EACKK,eAAe,eACfC,iBAAiB,QAASC,EAAU,CAAEC,SAAS,UAvDhDR,EAASE,cAAc,kBAAkBO,SAWzC,SAASC,IACLV,GACKK,MADLL,KACKK,OADLL,CAQYW,KAAYC,SAAxBC,iBAAA,cAGJC,QAAA,SAAAF,GAHIT,EAAYQ,YAAYC,KAMxBX,IAAAA,EAAmBc,KAAAA,SAAeC,cAAlC,kBACGD,EACHf,EACKK,KAAeU,EACfE,MAITjB,EALSK,eAAe,eACfY,oBAAoB,QAASV,GAK/BP,EAAPE,cAAA,kBAAAO,UAIAL,GAAA,OAxBIJ,EAEJK,eAAA,eAHSY,oBAAoB,QAASV,GA8BtC,SAAOA,IAGHD,IAAAA,EAAAA,CAGAY,GAAJ,EANA,IAAIC,EAAM,IAAIpB,EAAOqB,eASzBpB,EACKK,aAAe,WADpBc,EAAAb,iBAAA,OAAAe,GAJIF,EAAIG,KAAK,MAAOrB,EAAYe,MAC5BG,EAAID,KAAK,QArDb,CA2DDnB,OAAQC","file":"infinitescroll.js","sourcesContent":["/**\n * Infinite Scroll\n */\n\n(function(window, document) {\n    // next link element\n    var nextElement = document.querySelector(\"link[rel=next]\");\n    if (!nextElement) {\n        document.querySelector(\".read-more-row\").remove();\n        return;\n    }\n\n    // post feed element\n    var feedElement = document.querySelector(\".post-feed\");\n    if (!feedElement) return;\n\n    var loading = false;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n            return;\n        }\n        // append contents\n        var postElements = this.response.querySelectorAll(\".post-card\");\n        postElements.forEach(function(item) {\n            feedElement.appendChild(item);\n        });\n\n        // set next link\n        var resNextElement = this.response.querySelector(\"link[rel=next]\");\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n            document.querySelector(\".read-more-row\").remove();\n        }\n\n        // sync status\n        loading = false;\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) return;\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = \"document\";\n\n        xhr.addEventListener(\"load\", onPageLoad);\n\n        xhr.open(\"GET\", nextElement.href);\n        xhr.send(null);\n    }\n\n    document\n        .getElementById(\"readMoreBtn\")\n        .addEventListener(\"click\", onUpdate, { passive: true });\n})(window, document);\n"]}